#include <Python.h>

static PyObject* string(PyObject* self, PyObject* args) {
    char *path;
    if (!PyArg_ParseTuple(args, "s", &path)) {
        return NULL;
    }
    char c[1000];
    FILE *fptr;

    if ((fptr = fopen(path, "r")) == NULL)
    {
        printf("Error! opening file");
        // Program exits if file pointer returns NULL.
        exit(1);         
    }

    // reads text until newline 
    fscanf(fptr,"%[^\n]", c);

    printf("Data from the file:\n%s", c);
    fclose(fptr); 
    return Py_BuildValue("s", c);
};

static char string_docs[] = "";

static PyMethodDef string_funcs[] = {
    {"string", (PyCFunction)string, 
      METH_NOARGS, string_docs},
      {NULL}
};

void init(void) {
    Py_InitModule3("string", string_funcs,
                  "Extension module of string");
}
